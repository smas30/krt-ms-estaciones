[{"line":2,"elements":[{"line":4,"name":"","description":"","type":"background","keyword":"Background","steps":[{"name":"configure logPrettyResponse = false","result":{"duration":1774600,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 1. LLAMANDO AL SERVICIO AUTHTOKEN PARA HACER LOGIN Y OBTENER EL TOKEN"],"keyword":"*","line":6},{"name":"configure logPrettyRequest = false","result":{"duration":290900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":7},{"name":"def validBodyRequest = read('classpath:JsonRequest\/loginTokenRequest.json')","result":{"duration":36640900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":8},{"name":"def loginResponse = call read('classpath:api\/loginToken.feature') { request: validBodyRequest }","result":{"duration":2311720900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":9},{"name":"api\/loginToken.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":9},{"name":"url loginUrl","result":{"duration":810100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":4},{"name":"print loginUrl","result":{"duration":3273900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":5,"doc_string":{"content_type":"","value":"09:13:37.178 [print] http:\/\/ms-auth-oss-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/intraLogin \n","line":5}},{"name":"def schemaUtil = Java.type('util.JsonSchemaUtil')","result":{"duration":4765000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":6},{"name":"def schemaText = karate.readAsString('classpath:Schema\/sc_loginToken.json')","result":{"duration":1265800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":7},{"name":"def validBodyRequest = read('classpath:JsonRequest\/loginTokenRequest.json')","result":{"duration":550600,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":8},{"name":"request validBodyRequest","result":{"duration":162400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Given","line":12},{"name":"method POST","result":{"duration":1872920700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> When","line":13,"doc_string":{"content_type":"","value":"09:13:37.561 request:\n1 > POST http:\/\/ms-auth-oss-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/intraLogin\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: ms-auth-oss-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"login\":\"tns01\",\"clave\":\"T3st2024.+-\"}\n\n09:13:39.064 response time in milliseconds: 1486\n1 < 200\n1 < content-type: application\/json\n1 < content-length: 326\n1 < set-cookie: 346a326bcc8fc21fd3f034fd94d160bb=b93258c5db05ebda8c79fad18868405b; path=\/; HttpOnly\n1 < Set-Cookie: 346a326bcc8fc21fd3f034fd94d160bb=b93258c5db05ebda8c79fad18868405b; path=\/; HttpOnly\n{\"token\":\"eyJhbGciOiJIUzM4NCJ9.eyJjb2RFbXBsb3llZSI6IkM3OTRGOURDREQ4QzA4MjhENDYwNENGNTk0N0Q5REZFIiwic3ViIjoiZGVmYXVsdC1zdWJqZWN0IiwiaXNzIjoiZGVmYXVsdC1pc3N1ZXIiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJkZWZhdWx0LXVzZXJuYW1lIiwiaWF0IjoxNzU2NTU5NjE4LCJleHAiOjE3NTY1NjMyMTh9.BT_wx3pU2fVVs-xYS8vyNTt6UCgFzppIpqcqPDVm8lPODfDVjwar3C1Q1crZKJoU\"}\n\n","line":13}},{"name":"status 200","result":{"duration":23900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> Then","line":14},{"name":"match response.token == '#string'","result":{"duration":16512700,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# Validar que la respuesta contenga el campo token"],"keyword":"> And","line":17},{"name":"def responseText = karate.pretty(response)","result":{"duration":24253900,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# Validar la estructura completa de la respuesta usando el schema JSON"],"keyword":"> *","line":20},{"name":"def isValid = schemaUtil.isValid(schemaText, responseText)","result":{"duration":361044900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":21},{"name":"match isValid == true","result":{"duration":704100,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":22},{"result":{"duration":13999400,"status":"passed"},"comments":["# Tiempo de respuesta"],"line":25,"name":"print '=== TIEMPO DE RESPUESTA DEL FEATURE loginToken ===', responseTime \/ 1000, 's'","match":{"location":"karate","arguments":[]},"keyword":"> And","doc_string":{"content_type":"","value":"09:13:39.489 [print] === TIEMPO DE RESPUESTA DEL FEATURE loginToken === 1.486 s \n","line":25}},{"name":"def authToken = loginResponse.response.token","result":{"duration":596400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":10},{"name":"def headers = headersEstacionesConToken(authToken)","result":{"duration":2829500,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 2. CONFIGURANDO HEADERS PARA ESTACIONES"],"keyword":"*","line":12},{"name":"configure headers = headers","result":{"duration":89500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":13},{"name":"def regionId = 1","result":{"duration":713200,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 3. DEFINIENDO PARAMETROS DE CONSULTA"],"keyword":"*","line":15},{"name":"def noRegionId = 5000","result":{"duration":351000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":16},{"name":"def schemaUtil = Java.type('util.JsonSchemaUtil')","result":{"duration":439800,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 4. CONFIGURANDO VALIDACION DE SCHEMA"],"keyword":"*","line":19},{"name":"def schemaText = karate.readAsString('classpath:Schema\/sc_calculoId.json')","result":{"duration":844900,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":20},{"name":"def errorSchema = karate.readAsString('classpath:Schema\/sc_errorResponse.json')","result":{"duration":11098200,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":21}]},{"start_timestamp":"2025-08-30T13:13:37.067Z","line":41,"name":"Enviar regionId inexistente y validar respuesta","description":"","id":"enviar-regionid-inexistente-y-validar-respuesta","type":"scenario","keyword":"Scenario","steps":[{"name":"url baseUrl + '\/calculo\/id'","result":{"duration":7268800,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"Given","line":42},{"name":"headers headers","result":{"duration":659400,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":43},{"name":"param regionId = noRegionId","result":{"duration":339500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":44},{"name":"method GET","result":{"duration":2366014700,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"When","line":45,"doc_string":{"content_type":"","value":"09:13:39.506 request:\n1 > GET http:\/\/estaciones-bff-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/api\/v1\/estaciones\/\/calculo\/id?regionId=5000\n1 > Content-Type: application\/json\n1 > X-USER-ID: E11011\n1 > X-CORRELATION-ID: 1445|E11011|234234\n1 > X-TOKEN-ID: eyJhbGciOiJIUzM4NCJ9.eyJjb2RFbXBsb3llZSI6IkM3OTRGOURDREQ4QzA4MjhENDYwNENGNTk0N0Q5REZFIiwic3ViIjoiZGVmYXVsdC1zdWJqZWN0IiwiaXNzIjoiZGVmYXVsdC1pc3N1ZXIiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJkZWZhdWx0LXVzZXJuYW1lIiwiaWF0IjoxNzU2NTU5NjE4LCJleHAiOjE3NTY1NjMyMTh9.BT_wx3pU2fVVs-xYS8vyNTt6UCgFzppIpqcqPDVm8lPODfDVjwar3C1Q1crZKJoU\n1 > Host: estaciones-bff-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n\n\n09:13:41.870 response time in milliseconds: 2364\n1 < 200\n1 < content-length: 43\n1 < content-type: application\/json;charset=UTF-8\n1 < set-cookie: 7ebc866ebb4d2d727ca53353a6c0c030=126a0d116249904aeec188af06a28666; path=\/; HttpOnly\n1 < Set-Cookie: 7ebc866ebb4d2d727ca53353a6c0c030=126a0d116249904aeec188af06a28666; path=\/; HttpOnly\n{\"success\":false,\"timestamp\":1756559621875}\n\n","line":45}},{"name":"status 404","result":{"duration":13668700,"error_message":"status code was: 200, expected: 404, response time in milliseconds: 2364, url: http:\/\/estaciones-bff-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/api\/v1\/estaciones\/\/calculo\/id?regionId=5000, response: \n{\"success\":false,\"timestamp\":1756559621875}\nclasspath:api\/calculoIdEstacion.feature:46","status":"failed"},"match":{"location":"karate","arguments":[]},"keyword":"Then","line":46,"doc_string":{"content_type":"","value":"09:13:41.897 classpath:api\/calculoIdEstacion.feature:46\nThen status 404\nstatus code was: 200, expected: 404, response time in milliseconds: 2364, url: http:\/\/estaciones-bff-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/api\/v1\/estaciones\/\/calculo\/id?regionId=5000, response: \n{\"success\":false,\"timestamp\":1756559621875}\nclasspath:api\/calculoIdEstacion.feature:46\n","line":46}},{"name":"match response.success == false","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":47},{"name":"def responseText = karate.pretty(response)","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":48},{"name":"def isValid = schemaUtil.isValid(errorSchema, responseText)","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":49},{"name":"match isValid == true","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":50},{"name":"print 'Respuesta para region inexistente:', response","result":{"duration":0,"status":"skipped"},"match":{"location":"karate","arguments":[]},"keyword":"And","line":51}],"tags":[{"name":"@calculoIdEstacion","line":1},{"name":"@regionNoExiste","line":40}]}],"name":"api\/calculoIdEstacion.feature","description":"Obtener calculo de estacion mediante el endpoint GET \/api\/v1\/estaciones\/calculo\/id","id":"obtener-calculo-de-estacion-mediante-el-endpoint-get--api-v1-estaciones-calculo-id","keyword":"Feature","uri":"api\/calculoIdEstacion.feature","tags":[{"name":"@calculoIdEstacion","line":1}]}]