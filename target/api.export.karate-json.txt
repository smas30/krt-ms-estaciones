{"failedCount":1,"prefixedPath":"classpath:api\/export.feature","packageQualifiedName":"api.export","loopIndex":-1,"relativePath":"api\/export.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1070300,"startTime":1756474619534,"endTime":1756474619535,"millis":1.0703,"status":"passed"},"step":{"comments":["# 1. LLAMANDO AL SERVICIO AUTHTOKEN PARA HACER LOGIN Y OBTENER EL TOKEN"],"background":true,"line":6,"prefix":"*","index":0,"text":"configure logPrettyResponse = false"}},{"result":{"nanos":289900,"startTime":1756474619538,"endTime":1756474619538,"millis":0.2899,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":1,"text":"configure logPrettyRequest = false"}},{"result":{"nanos":36022700,"startTime":1756474619538,"endTime":1756474619574,"millis":36.0227,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":2,"text":"def validBodyRequest = read('classpath:JsonRequest\/loginTokenRequest.json')"}},{"result":{"nanos":2300562300,"startTime":1756474619572,"endTime":1756474621873,"millis":2300.5623,"status":"passed"},"step":{"background":true,"line":9,"prefix":"*","index":3,"text":"def loginResponse = call read('classpath:api\/loginToken.feature') { request: validBodyRequest }"},"callResults":[{"prefixedPath":"classpath:api\/loginToken.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-08-29 09:37:02 a. m.","durationMillis":2287.2277,"callArg":{"request":"validBodyRequest"},"failedCount":0,"packageQualifiedName":"api.loginToken","relativePath":"api\/loginToken.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1246200,"startTime":1756474619585,"endTime":1756474619586,"millis":1.2462,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url loginUrl"}},{"result":{"nanos":3986600,"startTime":1756474619585,"endTime":1756474619589,"millis":3.9866,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"print loginUrl"},"stepLog":"09:36:59.588 [print] http:\/\/ms-auth-oss-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/intraLogin \n"},{"result":{"nanos":4505500,"startTime":1756474619591,"endTime":1756474619596,"millis":4.5055,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def schemaUtil = Java.type('util.JsonSchemaUtil')"}},{"result":{"nanos":1247100,"startTime":1756474619594,"endTime":1756474619595,"millis":1.2471,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"def schemaText = karate.readAsString('classpath:Schema\/sc_loginToken.json')"}},{"result":{"nanos":742200,"startTime":1756474619594,"endTime":1756474619595,"millis":0.7422,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"def validBodyRequest = read('classpath:JsonRequest\/loginTokenRequest.json')"}},{"result":{"nanos":319700,"startTime":1756474619597,"endTime":1756474619597,"millis":0.3197,"status":"passed"},"step":{"line":12,"prefix":"Given","index":0,"text":"request validBodyRequest"}},{"result":{"nanos":1975511000,"startTime":1756474619597,"endTime":1756474621573,"millis":1975.511,"status":"passed"},"step":{"line":13,"prefix":"When","index":1,"text":"method POST"},"stepLog":"09:36:59.857 request:\n1 > POST http:\/\/ms-auth-oss-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/intraLogin\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: ms-auth-oss-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"login\":\"tns01\",\"clave\":\"T3st2024.+-\"}\n\n09:37:01.571 response time in milliseconds: 1707\n1 < 200\n1 < content-type: application\/json\n1 < content-length: 326\n1 < set-cookie: 346a326bcc8fc21fd3f034fd94d160bb=b93258c5db05ebda8c79fad18868405b; path=\/; HttpOnly\n1 < Set-Cookie: 346a326bcc8fc21fd3f034fd94d160bb=b93258c5db05ebda8c79fad18868405b; path=\/; HttpOnly\n{\"token\":\"eyJhbGciOiJIUzM4NCJ9.eyJjb2RFbXBsb3llZSI6IjhDM0ZFRTcwMUU3RUI0QkVBNTREOTZBNjhFNTE1RTMwIiwic3ViIjoiZGVmYXVsdC1zdWJqZWN0IiwiaXNzIjoiZGVmYXVsdC1pc3N1ZXIiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJkZWZhdWx0LXVzZXJuYW1lIiwiaWF0IjoxNzU2NDc0NjIxLCJleHAiOjE3NTY0NzgyMjF9.suUYUCNOwbkdWDC45p1xF6zdWJc1Mx_TMBjDtaKgjLrR09iJ4I8H-szcK1shkiCm\"}\n\n"},{"result":{"nanos":16100,"startTime":1756474621573,"endTime":1756474621573,"millis":0.0161,"status":"passed"},"step":{"line":14,"prefix":"Then","index":2,"text":"status 200"}},{"result":{"nanos":10423300,"startTime":1756474621573,"endTime":1756474621583,"millis":10.4233,"status":"passed"},"step":{"comments":["# Validar que la respuesta contenga el campo token"],"line":17,"prefix":"And","index":3,"text":"match response.token == '#string'"}},{"result":{"nanos":17639800,"startTime":1756474621584,"endTime":1756474621602,"millis":17.6398,"status":"passed"},"step":{"comments":["# Validar la estructura completa de la respuesta usando el schema JSON"],"line":20,"prefix":"*","index":4,"text":"def responseText = karate.pretty(response)"}},{"result":{"nanos":262675500,"startTime":1756474621600,"endTime":1756474621863,"millis":262.6755,"status":"passed"},"step":{"line":21,"prefix":"*","index":5,"text":"def isValid = schemaUtil.isValid(schemaText, responseText)"}},{"result":{"nanos":628500,"startTime":1756474621864,"endTime":1756474621865,"millis":0.6285,"status":"passed"},"step":{"line":22,"prefix":"*","index":6,"text":"match isValid == true"}},{"result":{"nanos":8286200,"startTime":1756474621865,"endTime":1756474621873,"millis":8.2862,"status":"passed"},"step":{"comments":["# Tiempo de respuesta"],"line":25,"prefix":"And","index":7,"text":"print '=== TIEMPO DE RESPUESTA DEL FEATURE loginToken ===', responseTime \/ 1000, 's'"},"stepLog":"09:37:01.873 [print] === TIEMPO DE RESPUESTA DEL FEATURE loginToken === 1.707 s \n"}],"line":11,"description":"","durationMillis":2287.2277,"failed":false,"tags":["loginToken"],"executorName":"main","name":"La respuesta del endpoint entrega un token JWT valido","startTime":1756474619585,"refId":"[1:11]","endTime":1756474621874,"exampleIndex":-1}],"name":"Servicio de autenticacion de la gerencia de soporte a la operacion","passedCount":1}]},{"result":{"nanos":1089300,"startTime":1756474621876,"endTime":1756474621877,"millis":1.0893,"status":"passed"},"step":{"background":true,"line":10,"prefix":"*","index":4,"text":"def authToken = loginResponse.response.token"}},{"result":{"nanos":5332300,"startTime":1756474621876,"endTime":1756474621881,"millis":5.3323,"status":"passed"},"step":{"comments":["# 2. CONFIGURANDO HEADERS PARA ESTACIONES"],"background":true,"line":13,"prefix":"*","index":5,"text":"def headers = headersEstacionesConToken(authToken)"}},{"result":{"nanos":151200,"startTime":1756474621881,"endTime":1756474621881,"millis":0.1512,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":6,"text":"configure headers = headers"}},{"result":{"nanos":1137300,"startTime":1756474621881,"endTime":1756474621882,"millis":1.1373,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":7,"text":"print 'TOKEN obtenido:', authToken"},"stepLog":"09:37:01.881 [print] TOKEN obtenido: eyJhbGciOiJIUzM4NCJ9.eyJjb2RFbXBsb3llZSI6IjhDM0ZFRTcwMUU3RUI0QkVBNTREOTZBNjhFNTE1RTMwIiwic3ViIjoiZGVmYXVsdC1zdWJqZWN0IiwiaXNzIjoiZGVmYXVsdC1pc3N1ZXIiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJkZWZhdWx0LXVzZXJuYW1lIiwiaWF0IjoxNzU2NDc0NjIxLCJleHAiOjE3NTY0NzgyMjF9.suUYUCNOwbkdWDC45p1xF6zdWJc1Mx_TMBjDtaKgjLrR09iJ4I8H-szcK1shkiCm \n"},{"result":{"nanos":4659600,"startTime":1756474621881,"endTime":1756474621886,"millis":4.6596,"status":"passed"},"step":{"line":19,"prefix":"Given","index":0,"text":"url baseUrl + '\/export'"}},{"result":{"nanos":692300,"startTime":1756474621888,"endTime":1756474621889,"millis":0.6923,"status":"passed"},"step":{"line":20,"prefix":"And","index":1,"text":"headers headers"}},{"result":{"nanos":701672100,"startTime":1756474621888,"endTime":1756474622590,"millis":701.6721,"status":"passed"},"step":{"comments":["##And param page = 1"],"line":22,"prefix":"When","index":2,"text":"method POST"},"stepLog":"09:37:01.890 request:\n1 > POST http:\/\/estaciones-bff-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/api\/v1\/estaciones\/\/export\n1 > Content-Type: application\/json\n1 > X-USER-ID: E11011\n1 > X-CORRELATION-ID: 1445|E11011|234234\n1 > X-TOKEN-ID: eyJhbGciOiJIUzM4NCJ9.eyJjb2RFbXBsb3llZSI6IjhDM0ZFRTcwMUU3RUI0QkVBNTREOTZBNjhFNTE1RTMwIiwic3ViIjoiZGVmYXVsdC1zdWJqZWN0IiwiaXNzIjoiZGVmYXVsdC1pc3N1ZXIiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJkZWZhdWx0LXVzZXJuYW1lIiwiaWF0IjoxNzU2NDc0NjIxLCJleHAiOjE3NTY0NzgyMjF9.suUYUCNOwbkdWDC45p1xF6zdWJc1Mx_TMBjDtaKgjLrR09iJ4I8H-szcK1shkiCm\n1 > Host: estaciones-bff-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n\n\n09:37:02.588 response time in milliseconds: 698\n1 < 400\n1 < content-length: 395\n1 < content-type: application\/json\n1 < set-cookie: 7ebc866ebb4d2d727ca53353a6c0c030=739fd5a9a7733606de7260d59fb218e7; path=\/; HttpOnly\n1 < Set-Cookie: 7ebc866ebb4d2d727ca53353a6c0c030=739fd5a9a7733606de7260d59fb218e7; path=\/; HttpOnly\n{\"success\":false,\"data\":{\"code\":\"400\",\"status\":\"BAD_REQUEST\",\"message\":\"Error injecting ve.com.telefonica.infrastructure.MDireccionesService ve.com.telefonica.domain.service.DefaultStationService.serviceDireccion\",\"errors\":[\"Error injecting ve.com.telefonica.infrastructure.MDireccionesService ve.com.telefonica.domain.service.DefaultStationService.serviceDireccion\"]},\"timestamp\":1756474622351}\n\n"},{"result":{"nanos":9804200,"errorMessage":"status code was: 400, expected: 200, response time in milliseconds: 698, url: http:\/\/estaciones-bff-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/api\/v1\/estaciones\/\/export, response: \n{\"success\":false,\"data\":{\"code\":\"400\",\"status\":\"BAD_REQUEST\",\"message\":\"Error injecting ve.com.telefonica.infrastructure.MDireccionesService ve.com.telefonica.domain.service.DefaultStationService.serviceDireccion\",\"errors\":[\"Error injecting ve.com.telefonica.infrastructure.MDireccionesService ve.com.telefonica.domain.service.DefaultStationService.serviceDireccion\"]},\"timestamp\":1756474622351}\nclasspath:api\/export.feature:23","startTime":1756474622590,"endTime":1756474622600,"millis":9.8042,"status":"failed"},"step":{"line":23,"prefix":"Then","index":3,"text":"status 200"},"stepLog":"09:37:02.599 classpath:api\/export.feature:23\nThen status 200\nstatus code was: 400, expected: 200, response time in milliseconds: 698, url: http:\/\/estaciones-bff-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/api\/v1\/estaciones\/\/export, response: \n{\"success\":false,\"data\":{\"code\":\"400\",\"status\":\"BAD_REQUEST\",\"message\":\"Error injecting ve.com.telefonica.infrastructure.MDireccionesService ve.com.telefonica.domain.service.DefaultStationService.serviceDireccion\",\"errors\":[\"Error injecting ve.com.telefonica.infrastructure.MDireccionesService ve.com.telefonica.domain.service.DefaultStationService.serviceDireccion\"]},\"timestamp\":1756474622351}\nclasspath:api\/export.feature:23\n"},{"result":{"nanos":0,"startTime":1756474622599,"endTime":1756474622599,"millis":0.0,"status":"skipped"},"step":{"line":24,"prefix":"And","index":4,"text":"match header Content-Type contains 'application\/vnd.openxmlformats-officedocument.spreadsheetml.sheet'"}},{"result":{"nanos":0,"startTime":1756474622599,"endTime":1756474622599,"millis":0.0,"status":"skipped"},"step":{"line":26,"prefix":"*","index":5,"text":"def fileName = responseHeaders['content-disposition'] ? responseHeaders['content-disposition'].split('filename=')[1] : 'estaciones_export.xlsx'"}},{"result":{"nanos":0,"startTime":1756474622599,"endTime":1756474622599,"millis":0.0,"status":"skipped"},"step":{"line":27,"prefix":"*","index":6,"text":"def fileSize = responseHeaders['content-length'] || 'desconocido'"}},{"result":{"nanos":0,"startTime":1756474622599,"endTime":1756474622599,"millis":0.0,"status":"skipped"},"step":{"comments":["# === ARCHIVO EXCEL GENERADO ==="],"line":30,"prefix":"And","index":7,"text":"print 'Nombre del archivo:', fileName"}},{"result":{"nanos":0,"startTime":1756474622599,"endTime":1756474622599,"millis":0.0,"status":"skipped"},"step":{"line":31,"prefix":"And","index":8,"text":"print 'Tamaño del archivo:', fileSize, 'bytes'"}},{"result":{"nanos":0,"startTime":1756474622599,"endTime":1756474622599,"millis":0.0,"status":"skipped"},"step":{"line":32,"prefix":"And","index":9,"text":"print '=== TIEMPO DE RESPUESTA DEL FEATURE ===', responseTime \/ 1000, 's'"}}],"line":18,"description":"","durationMillis":3062.4835,"failed":true,"error":"status code was: 400, expected: 200, response time in milliseconds: 698, url: http:\/\/estaciones-bff-git-dev-front-oss.apps.tmve-nprod-1.tmve-qa.com\/api\/v1\/estaciones\/\/export, response: \n{\"success\":false,\"data\":{\"code\":\"400\",\"status\":\"BAD_REQUEST\",\"message\":\"Error injecting ve.com.telefonica.infrastructure.MDireccionesService ve.com.telefonica.domain.service.DefaultStationService.serviceDireccion\",\"errors\":[\"Error injecting ve.com.telefonica.infrastructure.MDireccionesService ve.com.telefonica.domain.service.DefaultStationService.serviceDireccion\"]},\"timestamp\":1756474622351}\nclasspath:api\/export.feature:23","tags":["descargarExcelEstaciones","exportEstaciones"],"executorName":"main","name":"El endpoint debe permitir descargar el archivo Excel con las estaciones registradas","startTime":1756474619478,"refId":"[1:18]","endTime":1756474622599,"exampleIndex":-1}],"callDepth":0,"name":"Exportar estaciones mediante el endpoint GET \/estaciones\/export","description":"","resultDate":"2025-08-29 09:37:02 a. m.","durationMillis":3062.4835,"passedCount":0}